---
import Logo from '@components/ui/Logo.astro';
import Icon from '@components/ui/Icon.astro';
import UnicornStudio from '@components/UnicornStudio.astro';

const currentYear = new Date().getFullYear();
---

<footer class="wrapper">
  {/* Footer Content */}
  <div class="container footer-content">
    {/* About & CTA */}
    <nav class="footer-menu">
      <div class="menu-column">
        <Logo class="logo" />
        <p>
          Seit 2004 haben bei DÜS Eckert in Düsseldorf und Essen über 30.000 Menschen Deutsch
          gelernt. Unser gesamtes Team hat ein einziges Ziel: Dass Menschen ihre DTZ-Prüfung
          bestehen und hier ein Leben aufbauen können. <br /> Wir machen nur eins: Integrationskurse,
          die funktionieren.
        </p>
      </div>
      <div class="menu-column">
        <div class="link-group">
          <h2>Events</h2>
          <ul>
            <li><a href="/">Waffeltag 2025</a></li>
          </ul>
        </div>
        <div class="link-group">
          <h2>Standorte</h2>
          <ul>
            <li><a href="https://dues-eckert.com/locations/duesseldorf">Düsseldorf</a></li>
            <li><a href="https://dues-eckert.com/locations/essen">Essen</a></li>
          </ul>
        </div>
      </div>
      <div class="menu-column">
        <div class="link-group">
          <h2>Folge uns auf</h2>

          {/* Social Icons */}
          <div class="social-icons">
            <a
              class="footer-social-link"
              href="https://instagram.com/dues.eckert"
              aria-label="DÜS Eckert auf Instagram"
              target="_blank"
              rel="noopener noreferrer"
            >
              <Icon name="instagram_logo" size="1.5rem" />
            </a>
            <a
              class="footer-social-link"
              href="https://www.facebook.com/dues.eckert"
              aria-label="DÜS Eckert auf Facebook"
              target="_blank"
              rel="noopener noreferrer"
            >
              <Icon name="facebook_logo" size="1.5rem" />
            </a>
            <a
              class="footer-social-link"
              href="https://www.linkedin.com/company/dueseckert/"
              aria-label="DÜS Eckert auf LinkedIn"
              target="_blank"
              rel="noopener noreferrer"
            >
              <Icon name="linkedin_logo" size="1.5rem" />
            </a>
          </div>
        </div>
      </div>
    </nav>

    {/* Bottom Bar: Copyright | Legal Links */}
    <div class="bottom-bar">
      <p>
        © {currentYear} DÜS Eckert Spracheninstitut GmbH
      </p>

      <nav class="legal-links link-group">
        <a href="https://dues-eckert.com/de/impressum">Impressum</a>
        <a href="https://dues-eckert.com/de/datenschutz">Datenschutz</a>
      </nav>
    </div>
  </div>

  {/* Unicorn Studio Canvas - Animated gradient background */}
  <div
    class="unicorn-canvas"
    data-us-project-src="/scenes/gradient-swirl.json"
    data-us-scale="1"
    data-us-dpi="1"
    data-us-lazyload="true"
    data-us-production="true"
    data-us-alttext="Animated footer background with flowing gradients"
  >
  </div>
</footer>
<UnicornStudio />

<style>
  :root {
    --color-text-primary: var(--color-white);
    --color-text-secondary: oklch(from var(--color-gray-200) l c h / 80%);
  }

  footer {
    position: relative;
    display: flex;
    flex-direction: column;
    padding-block: 1rem;
    color: var(--color-text-primary);
    container-type: inline-size;

    /* If you need breakpoints, use @media here,
    since the container can't query itself
    – a container query wouldn't work on this top level element.
   You'd have to set a container-type on the <body> element,
  which isn't recommended. */
  }

  .footer-content {
    position: relative;
    z-index: 1;
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: 2rem;
    padding-block: 1rem;

    @container (width >= 768px) {
      min-height: 40rem;
      padding-block: 2rem;
    }
  }

  /* Footer Navigation */

  .footer-menu {
    display: grid;
    grid-template-areas:
      'about about'
      'links social';
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;

    @container (width >= 768px) {
      grid-template-areas: 'about links social';
      grid-template-columns: 1fr repeat(2, minmax(auto, max-content));
      gap: 3rem;
    }
  }

  .menu-column {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    align-items: flex-start;
    justify-content: left;
    max-width: 50ch;
  }

  .menu-column:nth-child(1) {
    grid-area: about;
  }

  .menu-column:nth-child(2) {
    grid-area: links;
  }

  .menu-column:nth-child(3) {
    grid-area: social;
  }

  :where(.link-group a) {
    margin: -0.25rem -0.5rem;
    padding: 0.25rem 0.5rem;

    /* Using :where() to set a soft default for all links */
    color: var(--color-text-primary);
    text-decoration: none;
    border-radius: 0.5rem;
    transition: var(--transition-colors);

    &:hover {
      color: var(--color-text-primary);
      background-color: oklch(from var(--color-white) l c h / 10%);
    }
  }

  h2 {
    margin-bottom: 0.5rem;
    color: var(--color-text-primary);
    font-size: 1rem;
    font-weight: 700;
  }

  ul {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .footer-menu p {
    color: var(--color-text-primary);
    line-height: 1.5;
  }

  :global(.logo) {
    max-height: 4rem;
    margin-left: -2px;
  }

  .social-icons {
    display: inline-flex;
    gap: 0.5rem;
    margin-top: -0.25rem;
    margin-left: -0.25rem;

    > a {
      margin: 0;
      padding: 0.25rem;
      color: var(--color-text-primary);
      border-radius: 0.5rem;
      transition: var(--transition-colors);
    }

    > a:hover {
      background-color: oklch(from var(--color-white) l c h / 20%);
    }
  }

  /* CTA Button  */
  .cta-button {
    display: inline-flex;
    align-items: center;
    align-self: flex-start;
    justify-content: center;
    padding: 1rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    background: linear-gradient(
      oklch(from var(--color-white) l c h / 20%),
      oklch(from var(--color-white) l c h / 10%)
    );
    border: 1px solid oklch(from var(--color-white) l c h / 10%);
    border-radius: var(--radius-sm);
    backdrop-filter: blur(12px);
    transition: var(--transition-colors);
  }

  /* Bottom Bar */

  .bottom-bar {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    align-items: center;
    justify-content: space-between;
    margin-top: auto;
    padding-top: 2rem;
    color: var(--color-text-secondary);
    font-size: 1rem;
    border-top: 0.25px solid oklch(from var(--color-white) l c h / 10%);
  }

  @container (width >= 768px) {
    .bottom-bar {
      flex-direction: row;
    }
  }

  .legal-links {
    display: flex;
    gap: 2rem;
    align-items: center;

    > a {
      color: var(--color-text-secondary);
      text-decoration: none;
      transition: var(--transition-colors);
    }

    > a:hover {
      color: var(--color-text-primary);
    }
  }

  /* Unicorn Studio Canvas */
  .unicorn-canvas {
    position: absolute;
    inset: 0;
    pointer-events: none;

    &::after {
      position: absolute;
      inset: 0;
      background-color: rgb(0 0 0 / 30%);
      content: '';
    }
  }
</style>
